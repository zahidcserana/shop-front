{"version":3,"file":"ng-keyboard-shortcuts.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","ng://ng-keyboard-shortcuts/lib/keys.ts","ng://ng-keyboard-shortcuts/lib/utils.ts","ng://ng-keyboard-shortcuts/lib/ng-keyboard-shortcuts.service.ts","ng://ng-keyboard-shortcuts/lib/ng-keyboard-shortcuts.component.ts","ng://ng-keyboard-shortcuts/lib/ng-keyboard-shortcuts-help.service.ts","ng://ng-keyboard-shortcuts/lib/ng-keyboard-shortcuts.interfaces.ts","ng://ng-keyboard-shortcuts/lib/ng-keyboard-shortcuts.directive.ts","ng://ng-keyboard-shortcuts/lib/portal.ts","ng://ng-keyboard-shortcuts/lib/dom-portal-outlet.ts","ng://ng-keyboard-shortcuts/lib/ng-keyboard-shortcuts-help.component.ts","ng://ng-keyboard-shortcuts/lib/ng-keyboard-shortcuts-help-item.component.ts","ng://ng-keyboard-shortcuts/lib/ng-keyboard-shortcuts.module.ts","ng://ng-keyboard-shortcuts/lib/polyfills.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","const isMac = (navigator.userAgent.indexOf('Mac OS') !== -1);\n\nexport const modifiers = {\n    'shift': 'shiftKey',\n    'ctrl': 'ctrlKey',\n    'alt': 'altKey',\n    'cmd': isMac ? 'metaKey' : 'ctrlKey',\n    'command': isMac ? 'metaKey' : 'ctrlKey',\n    'meta': isMac? 'metaKey' : 'ctrlKey',\n    'left command': 'metaKey',\n    'right command': 'MetaRight',\n    'â': isMac ? 'metaKey' : 'ctrlKey',\n    'option': 'altKey',\n    'ctl': 'ctrlKey',\n    'control': 'ctrlKey',\n};\n\nexport const symbols = {\n    'cmd': isMac ? 'â' : 'Ctrl',\n    'command': isMac ? 'â' : 'Ctrl',\n    'left command': isMac ? 'â' : 'Ctrl',\n    'right command': isMac ? 'â' : 'Ctrl',\n    'option': isMac ? 'â¥' : 'Alt',\n    'left': 'â',\n    'right': 'â',\n    'up': 'â',\n    'down': 'â',\n    'alt': isMac ? 'â¥' : 'Alt',\n    'ctrl': 'Ctrl',\n    'control': 'Ctrl',\n    'shift': 'â§'\n};\n\nexport const _MAP = {\n    8: 'backspace',\n    9: 'tab',\n    13: 'enter',\n    16: 'shift',\n    17: ['ctrl', 'control'],\n    18: 'alt',\n    20: 'capslock',\n    27: ['esc', 'escape'],\n    32: ['space', 'spc'],\n    33: 'pageup',\n    34: 'pagedown',\n    35: 'end',\n    36: 'home',\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    40: 'down',\n    45: 'ins',\n    46: 'del',\n    91: ['meta', 'cmd', 'command'],\n    93: ['meta', 'cmd', 'command'],\n    224: ['meta', 'cmd', 'command']\n};\n\n\n/**\n * mapping for special characters so they can support\n *\n * this dictionary is only used incase you want to bind a\n * keyup or keydown event to one of these keys\n *\n * @type\n */\nexport const _KEYCODE_MAP = {\n    106: '*',\n    107: '+',\n    109: '-',\n    110: '.',\n    111 : '/',\n    186: ';',\n    187: '=',\n    188: ',',\n    189: '-',\n    190: '.',\n    191: '/',\n    192: '`',\n    219: '[',\n    220: '\\\\',\n    221: ']',\n    222: '\\''\n};\n\n/**\n * this is a mapping of keys that require shift on a US keypad\n * back to the non shift equivelents\n *\n * this is so you can use keyup events with these keys\n *\n * note that this will only work reliably on US keyboards\n *\n */\nexport const _SHIFT_MAP = {\n    '`': '~',\n    '1': '!',\n    '2': '@',\n    '3': '#',\n    '4': '$',\n    '5': '%',\n    '6': '^',\n    '7': '&',\n    '8': '*',\n    '9': '(',\n    '0': ')',\n    '-': '_',\n    '=': '+',\n    ';': ':',\n    '\\'': '\\\"',\n    ',': '<',\n    '.': '>',\n    '/': '?',\n    '\\\\': '|'\n};\n\n/**\n * loop through the f keys, f1 to f19 and add them to the map\n * programatically\n */\nfor (let i = 1; i < 20; ++i) {\n    _MAP[111 + i] = 'f' + i;\n}\n\n/**\n * loop through to map numbers on the numeric keypad\n */\nfor (let i = 0; i <= 9; ++i) {\n\n    // This needs to use a string cause otherwise since 0 is falsey\n    // event will never fire for numpad 0 pressed as part of a keydown\n    // event.\n    _MAP[i + 96] = i.toString();\n}","export function isFunction(x: any): x is Function {\n    return typeof x === \"function\";\n}\n\nexport const any = (fn: Function, list: any[]) => {\n    let idx = 0;\n    while (idx < list.length) {\n        if (fn(list[idx])) {\n            return true;\n        }\n        idx += 1;\n    }\n    return false;\n};\n\nexport const identity = x => x;\n\n/**\n * @ignore\n * @param x\n * @returns boolean\n */\nexport const isNill = x => x == null;\n\n/**\n * @ignore\n * @param xs\n * @param key\n * @returns any\n */\nexport const groupBy = (xs, key) =>\n    xs.reduce(\n        (result, x) => ({\n            ...result,\n            [x[key]]: [...(result[x[key]] || []), x]\n        }),\n        {}\n    );\n\n/**\n * @ignore\n * @param first\n * @param second\n * @returns any[]\n */\nexport const difference = (first: any[], second: any[]) =>\n    first.filter(item => !second.includes(item));\n\n/**\n * @ignore\n * @param preds\n * @returns (...args) => boolean;\n */\nexport const allPass = preds => (...args) => {\n    let idx = 0;\n    const len = preds.length;\n    while (idx < len) {\n        if (!preds[idx].apply(this, args)) {\n            return false;\n        }\n        idx += 1;\n    }\n    return true;\n};\nexport const prop = prop => object => object[prop];\n\nconst minMaxArrayProp = type => (property, array) =>\n    Math[type].apply(Math, array.map(prop(property)));\n\nexport const maxArrayProp = (property, array) => {\n    return array.reduce(\n        (acc, curr) => {\n            const propFn = prop(property);\n            const currentValue = propFn(curr);\n            const previousValue = propFn(acc);\n            return currentValue > previousValue ? curr : acc;\n        },\n        { [property]: 0 }\n    );\n};","import { Injectable, OnDestroy } from \"@angular/core\";\nimport { _KEYCODE_MAP, _MAP, _SHIFT_MAP, modifiers } from \"./keys\";\nimport {\n    BehaviorSubject,\n    fromEvent,\n    Observable,\n    Subject,\n    Subscription,\n    throwError,\n    timer,\n    of\n} from \"rxjs\";\nimport {\n    ParsedShortcut,\n    ShortcutEventOutput,\n    ShortcutInput\n} from \"./ng-keyboard-shortcuts.interfaces\";\nimport {\n    catchError,\n    filter,\n    map,\n    repeat,\n    scan,\n    switchMap,\n    takeUntil,\n    tap,\n    throttle\n} from \"rxjs/operators\";\nimport { allPass, any, difference, identity, isFunction, isNill, maxArrayProp } from \"./utils\";\n\n/**\n * @ignore\n * @type {number}\n */\nlet guid = 0;\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class KeyboardShortcutsService implements OnDestroy {\n    /**\n     * Parsed shortcuts\n     * for each key create a predicate function\n     */\n    private _shortcuts: ParsedShortcut[] = [];\n\n    private _sequences: ParsedShortcut[] = [];\n\n    /**\n     * Throttle the keypress event.\n     */\n    private throttleTime = 0;\n\n    private _pressed = new Subject<ShortcutEventOutput>();\n\n    /**\n     * Streams of pressed events, can be used instead or with a command.\n     */\n    public pressed$ = this._pressed.asObservable();\n\n    /**\n     * Disable all keyboard shortcuts\n     */\n    private disabled = false;\n    /**\n     * @ignore\n     * 2000 ms window to allow between key sequences otherwise\n     * the sequence will reset.\n     */\n    private static readonly TIMEOUT_SEQUENCE = 1000;\n\n    private _shortcutsSub = new BehaviorSubject<ParsedShortcut[]>([]);\n    public shortcuts$ = this._shortcutsSub\n        .asObservable()\n        .pipe(filter(shortcuts => !!shortcuts.length));\n\n    private _ignored = [\"INPUT\", \"TEXTAREA\", \"SELECT\"];\n\n    /**\n     * @ignore\n     * Subscription for on destroy.\n     */\n    private readonly subscriptions: Subscription[] = [];\n\n    /**\n     * @ignore\n     * @param shortcut\n     */\n    private isAllowed = (shortcut: ParsedShortcut) => {\n        const target = shortcut.event.target as HTMLElement;\n        if (target === shortcut.target) {\n            return true;\n        }\n        if (shortcut.allowIn.length) {\n            return !difference(this._ignored, shortcut.allowIn).includes(target.nodeName);\n        }\n        return !this._ignored.includes(target.nodeName);\n    };\n\n    /**\n     * @ignore\n     * @param event\n     */\n    private mapEvent = event => {\n        return this._shortcuts\n            .map(shortcut =>\n                Object.assign({}, shortcut, {\n                    predicates: any(\n                        identity,\n                        shortcut.predicates.map((predicates: any) => allPass(predicates)(event))\n                    ),\n                    event: event\n                })\n            )\n            .filter(shortcut => shortcut.predicates)\n            .reduce((acc, shortcut) => (acc.priority > shortcut.priority ? acc : shortcut), {\n                priority: 0\n            } as ParsedShortcut);\n    };\n\n    /**\n     * @ignore\n     */\n    private keydown$ = fromEvent(document, \"keydown\");\n\n    /**\n     * @ignore\n     */\n    private keydownCombo$ = this.keydown$.pipe(\n        filter(_ => !this.disabled),\n        map(this.mapEvent),\n        filter(\n            (shortcut: ParsedShortcut) =>\n                !shortcut.target || shortcut.event.target === shortcut.target\n        ),\n        filter((shortcut: ParsedShortcut) => isFunction(shortcut.command)),\n        filter(this.isAllowed),\n        tap(shortcut => !shortcut.preventDefault || shortcut.event.preventDefault()),\n        throttle(shortcut => timer(shortcut.throttleTime)),\n        tap(shortcut => shortcut.command({ event: shortcut.event, key: shortcut.key })),\n        tap(shortcut => this._pressed.next({ event: shortcut.event, key: shortcut.key })),\n        catchError(error => throwError(error))\n    );\n\n    /**\n     * @ignore\n     */\n    private timer$ = new Subject();\n    /**\n     * @ignore\n     */\n    private resetCounter$ = this.timer$\n        .asObservable()\n        .pipe(switchMap(() => timer(KeyboardShortcutsService.TIMEOUT_SEQUENCE)));\n    /**\n     * @ignore\n     */\n    private keydownSequence$ = this.shortcuts$.pipe(\n        map(shortcuts => shortcuts.filter(shortcut => shortcut.isSequence)),\n        switchMap(sequences =>\n            this.keydown$.pipe(\n                map(event => {\n                    return {\n                        event,\n                        sequences\n                    };\n                }),\n                tap(this.timer$)\n            )\n        ),\n        scan(\n            (acc: { events: any[]; command?: any; sequences: any[] }, arg: any) => {\n                let { event } = arg;\n                const currentLength = acc.events.length;\n                const sequences = currentLength ? acc.sequences : arg.sequences;\n                let [characters] = this.characterFromEvent(event);\n                characters = Array.isArray(characters) ? characters : [characters];\n                const result = sequences\n                    .map(sequence => {\n                        const sequences = sequence.sequence.filter(\n                            seque => characters.some((key) => seque[currentLength] === key)\n                        );\n                        const partialMatch = sequences.length > 0;\n                        if (sequence.fullMatch) {\n                            return sequence;\n                        }\n                        return {\n                            ...sequence,\n                            sequence: sequences,\n                            partialMatch,\n                            event: event,\n                            fullMatch:\n                                partialMatch &&\n                                this.isFullMatch({ command: sequence, events: acc.events })\n                        };\n                    })\n                    .filter(sequences => sequences.partialMatch || sequences.fullMatch);\n\n                let [match] = result;\n                if (!match || this.modifiersOn(event)) {\n                    return { events: [], sequences: this._sequences };\n                }\n                /*\n                 * handle case of \"?\" sequence and \"? a\" sequence\n                 * need to determine which one to trigger.\n                 * if both match, we pick the longer one (? a) in this case.\n                 */\n                const guess = maxArrayProp('priority', result);\n                if (result.length > 1 && guess.fullMatch) {\n                    return { events: [], command: guess, sequences: this._sequences };\n                }\n                if (result.length > 1) {\n                    return { events: [...acc.events, event], command: result, sequences: result };\n                }\n                if (match.fullMatch) {\n                    return { events: [], command: match, sequences: this._sequences };\n                }\n                return { events: [...acc.events, event], command: result, sequences: result };\n            },\n            { events: [], sequences: [] }\n        ),\n        switchMap(({ command }) => {\n            if (Array.isArray(command)) {\n                /*\n                 * Add a timer to handle the case where for example:\n                 * a sequence \"?\" is registered and \"? a\" is registered as well\n                 * if the user does not hit any key for 500ms, the single sequence will trigger\n                 * if any keydown event occur, this timer will reset, given a chance to complete\n                 * the full sequence (? a) in this case.\n                 * This delay only occurs when single key sequence is the beginning of another sequence.\n                 */\n                return timer(500).pipe(\n                    map(() => ({ command: command.filter(command => command.fullMatch)[0] })),\n                );\n            }\n            return of({ command });\n        }),\n        filter(({ command }) => command && command.fullMatch),\n        map(({ command }) => command),\n        filter((shortcut: ParsedShortcut) => isFunction(shortcut.command)),\n        filter(this.isAllowed),\n        tap(shortcut => !shortcut.preventDefault || shortcut.event.preventDefault()),\n        throttle(shortcut => timer(shortcut.throttleTime)),\n        tap(shortcut => shortcut.command({ event: shortcut.event, key: shortcut.key })),\n        tap(shortcut => this._pressed.next({ event: shortcut.event, key: shortcut.key })),\n        takeUntil(this.resetCounter$),\n        repeat()\n    );\n\n    /**\n     * @ignore\n     * @param command\n     * @param events\n     */\n    private isFullMatch({ command, events }) {\n        if (!command) {\n            return false;\n        }\n        return command.sequence.some(sequence => {\n            return sequence.length === events.length + 1;\n        });\n    }\n\n    /**\n     * @ignore\n     */\n    private get shortcuts() {\n        return this._shortcuts;\n    }\n\n    /**\n     * @ignore\n     */\n    constructor() {\n        this.subscriptions.push(this.keydownSequence$.subscribe(), this.keydownCombo$.subscribe());\n    }\n\n    /**\n     * @ignore\n     * @param event\n     */\n    private _characterFromEvent(event): [string, boolean] {\n        if (typeof event.which !== \"number\") {\n            event.which = event.keyCode;\n        }\n        // for non keypress events the special maps are needed\n        if (_MAP[event.which]) {\n            return [_MAP[event.which], event.shiftKey];\n        }\n\n        if (_KEYCODE_MAP[event.which]) {\n            return [_KEYCODE_MAP[event.which], event.shiftKey];\n        }\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return [String.fromCharCode(event.which).toLowerCase(), event.shiftKey];\n    }\n\n    private characterFromEvent(event) {\n        let [key, shiftKey] = this._characterFromEvent(event);\n        if (shiftKey && _SHIFT_MAP[key]) {\n            return [_SHIFT_MAP[key], shiftKey];\n        }\n        return [key, shiftKey];\n    }\n\n    /**\n     * @ignore\n     * Remove subscription.\n     */\n    ngOnDestroy(): void {\n        this.subscriptions.forEach(sub => sub.unsubscribe());\n    }\n\n    /**\n     * @ignore\n     * @param shortcuts\n     */\n    private isSequence(shortcuts: string[]): boolean {\n        return !shortcuts.some(shortcut => shortcut.includes(\"+\"));\n    }\n\n    /**\n     * Add new shortcut/s\n     */\n    public add(shortcuts: ShortcutInput[] | ShortcutInput): string[] {\n        shortcuts = Array.isArray(shortcuts) ? shortcuts : [shortcuts];\n        const commands = this.parseCommand(shortcuts);\n        commands.forEach(command => {\n            if (command.isSequence) {\n                this._sequences.push(command);\n                return;\n            }\n            this._shortcuts.push(command);\n        });\n        setTimeout(() => {\n            this._shortcutsSub.next([...this._shortcuts, ...this._sequences]);\n        });\n        return commands.map(command => command.id);\n    }\n\n    /**\n     * Remove a command based on key or array of keys.\n     * can be used for cleanup.\n     * @returns\n     * @param ids\n     */\n    public remove(ids: string | string[]): KeyboardShortcutsService {\n        ids = Array.isArray(ids) ? ids : [ids];\n        this._shortcuts = this._shortcuts.filter(shortcut => !ids.includes(shortcut.id));\n        this._sequences = this._sequences.filter(shortcut => !ids.includes(shortcut.id));\n        setTimeout(() => {\n            this._shortcutsSub.next([...this._shortcuts, ...this._sequences]);\n        });\n        return this;\n    }\n\n    /**\n     * Returns an observable of keyboard shortcut filtered by a specific key.\n     * @param key - the key to filter the observable by.\n     */\n    public select(key: string): Observable<ShortcutEventOutput> {\n        return this.pressed$.pipe(\n            filter(({ event, key: eventKeys }) => {\n                eventKeys = Array.isArray(eventKeys) ? eventKeys : [eventKeys];\n                return !!eventKeys.find(eventKey => eventKey === key);\n            })\n        );\n    }\n\n    /**\n     * @ignore\n     * transforms a shortcut to:\n     * a predicate function\n     */\n    private getKeys = (keys: string[]) => {\n        return keys\n            .map(key => key.trim().toLowerCase())\n            .filter(key => key !== \"+\")\n            .map(key => {\n                // for modifiers like control key\n                // look for event['ctrlKey']\n                // otherwise use the keyCode\n                if (modifiers.hasOwnProperty(key)) {\n                    return event => !!event[modifiers[key]];\n                }\n\n                return event => {\n                    let [characters, shiftKey] = this.characterFromEvent(event);\n                    characters = Array.isArray(characters) ? characters : [characters];\n                    return characters.some(char => {\n                        if (char === key && shiftKey) {\n                            return true;\n                        }\n                        return key === char;\n                    })\n                };\n            });\n    };\n\n    /**\n     * @ignore\n     * @param event\n     */\n    private modifiersOn(event) {\n        return [\"metaKey\", \"altKey\", \"ctrlKey\"].some(mod => event[mod]);\n    }\n\n    /**\n     * @ignore\n     * Parse each command using getKeys function\n     */\n    private parseCommand(command: ShortcutInput | ShortcutInput[]): ParsedShortcut[] {\n        const commands = Array.isArray(command) ? command : [command];\n        return commands.map(command => {\n            const keys = Array.isArray(command.key) ? command.key : [command.key];\n            const priority = Math.max(...keys.map(key => key.split(\" \").filter(identity).length));\n            const predicates = keys.map(key => this.getKeys(key.split(\" \").filter(identity)));\n            const isSequence = this.isSequence(keys);\n            const sequence = isSequence\n                ? keys.map(key =>\n                      key\n                          .split(\" \")\n                          .filter(identity)\n                          .map(key => key.trim())\n                  )\n                : [];\n            return {\n                ...command,\n                isSequence,\n                sequence: isSequence ? sequence : [],\n                allowIn: command.allowIn || [],\n                key: keys,\n                id: `${guid++}`,\n                throttle: isNill(command.throttleTime) ? this.throttleTime : command.throttleTime,\n                priority: priority,\n                predicates: predicates\n            } as ParsedShortcut;\n        });\n    }\n}\n","import {\n    AfterViewInit,\n    Component,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    SimpleChanges\n} from \"@angular/core\";\nimport { KeyboardShortcutsService } from \"./ng-keyboard-shortcuts.service\";\nimport { ShortcutInput, ShortcutEventOutput } from \"./ng-keyboard-shortcuts.interfaces\";\nimport { Observable } from \"rxjs\";\n\n/**\n * A component to bind global shortcuts, can be used multiple times across the app\n * will remove registered shortcuts when element is removed from DOM.\n */\n@Component({\n    selector: \"ng-keyboard-shortcuts\",\n    template: \"\"\n})\nexport class KeyboardShortcutsComponent implements OnInit, AfterViewInit, OnChanges, OnDestroy {\n    /**\n     * A list of shortcuts.\n     */\n    @Input() shortcuts: ShortcutInput[] | ShortcutInput = [];\n\n    /**\n     * @ignore\n     * list of registered keyboard shortcuts\n     * used for clean up on NgDestroy.\n     */\n    private clearIds: string[] = [];\n\n    /**\n     * @ignore\n     */\n    private _disabled = false;\n    /**\n     * Disable all shortcuts for this component.\n     */\n    @Input() set disabled(value) {\n        this._disabled = value;\n        if (this.clearIds) {\n            this.keyboard.remove(this.clearIds);\n            this.clearIds = [];\n        }\n        if (value) {\n            return;\n        }\n        this.clearIds = this.keyboard.add(this.shortcuts);\n    }\n\n    /**\n     * @ignore\n     * @param {KeyboardShortcutsService} keyboard\n     */\n    constructor(private keyboard: KeyboardShortcutsService) {}\n\n    /**\n     * @ignore\n     */\n    ngOnInit() {}\n\n    /**\n     * Select a key to listen to, will emit when the selected key is pressed.\n     */\n    public select(key: string): Observable<ShortcutEventOutput> {\n        return this.keyboard.select(key);\n    }\n\n    /**\n     * @ignore\n     */\n    ngAfterViewInit(): void {}\n\n    /**\n     * @ignore\n     */\n    ngOnChanges(changes: SimpleChanges): void {\n        if (!changes.shortcuts || !changes.shortcuts.currentValue) {\n            return;\n        }\n        if (this.clearIds) {\n            this.keyboard.remove(this.clearIds);\n        }\n        setTimeout(() => this.clearIds = this.keyboard.add(changes.shortcuts.currentValue));\n    }\n\n    /**\n     * @ignore\n     */\n    ngOnDestroy(): void {\n        this.keyboard.remove(this.clearIds);\n    }\n}\n","import { Injectable } from \"@angular/core\";\nimport { KeyboardShortcutsService } from \"./ng-keyboard-shortcuts.service\";\nimport { map } from \"rxjs/operators\";\n\n/**\n * Service to assist showing custom help screen\n */\n@Injectable({\n    providedIn: \"root\"\n})\nexport class KeyboardShortcutsHelpService {\n    /**\n     * @ignore\n     * @param {KeyboardShortcutsService} keyboard\n     */\n    constructor(private keyboard: KeyboardShortcutsService) {}\n\n    /**\n     * Observable to provide access to all registered shortcuts in the app.\n     * @type {Observable<any>}\n     */\n    public shortcuts$ = this.keyboard.shortcuts$.pipe(\n        map(shortcuts =>\n            shortcuts\n                .filter(shortcut => Boolean(shortcut.label) && Boolean(shortcut.description))\n                .map(({ key, label, description }) => ({\n                    key,\n                    label,\n                    description\n                }))\n        )\n    );\n}\n","/**\n * The shortcut input for the Directive\n */\nexport interface Shortcut {\n\n    /**\n     * A key or list of keys to listen to and fire the command.\n     */\n    key: string | string[];\n\n    /**\n     * callback to be called when shortcut is pressed.\n     * @param event - the event out\n     */\n    command(event: ShortcutEventOutput): any;\n\n    /**\n     * Description for the command can be used for rendering help menu.\n     */\n    description?: string;\n\n    /**\n     * How much time to throttle in ms.\n     */\n    throttleTime?: number;\n\n    /**\n     * Label, can be used for grouping commands.\n     */\n    label?: string;\n\n    /**\n     * Prevent browser default, default: false\n     */\n    preventDefault?: boolean;\n}\n\n/**\n * The shortcut input type for ng-keyboard-shortcuts component\n */\nexport interface ShortcutInput extends Shortcut {\n    /**\n     * textarea, select and input are ignored by default, this is used to override\n     * this behavior.\n     * allow in node names, accepts: [\"TEXTAREA\", \"SELECT\", \"INPUT]\n     */\n    allowIn?: AllowIn[];\n    /**\n     * Only trigger the command when the target is in focus.\n     */\n    target?: HTMLElement;\n}\n\nexport enum AllowIn {\n    Textarea = 'TEXTAREA',\n    Input = 'INPUT',\n    Select = \"SELECT\"\n}\n\n/**\n * @ignore\n */\nexport interface ParsedShortcut extends ShortcutInput {\n    key: string[];\n    predicates: Function[][];\n    id: string;\n    priority?: number;\n\n    isSequence: boolean;\n    sequence?: string[][];\n    event?: KeyboardEvent;\n}\n\n/**\n * The output type fired by the command when shortcut is triggered.\n */\nexport interface ShortcutEventOutput {\n    /**\n     * The browser keyboard event\n     */\n    event: KeyboardEvent;\n    /**\n     * The registered key that was triggered\n     */\n    key: string[] | string;\n}","import { Directive, ElementRef, Input, OnChanges, OnDestroy, SimpleChanges } from \"@angular/core\";\nimport { AllowIn, Shortcut } from \"./ng-keyboard-shortcuts.interfaces\";\nimport { KeyboardShortcutsService } from \"./ng-keyboard-shortcuts.service\";\n\n/**\n * A directive to be used with \"focusable\" elements, like:\n * textarea, input, select.\n */\n@Directive({\n    selector: \"[ngKeyboardShortcuts]\"\n})\nexport class KeyboardShortcutsDirective implements OnDestroy, OnChanges {\n    /**\n     * clearId to remove shortcuts.\n     */\n    private clearIds;\n    /**\n     * Shortcut inputs for the directive.\n     * will only work when the element is in focus\n     */\n    @Input() ngKeyboardShortcuts: Shortcut[];\n    /**\n     * @ignore\n     * @type {boolean}\n     * @private\n     */\n    private _disabled = false;\n\n    /**\n     * whether to disable the shortcuts for this directive\n     * @param value\n     */\n    @Input() set disabled(value) {\n        this._disabled = value;\n        if (this.clearIds) {\n            this.keyboard.remove(this.clearIds);\n        }\n        setTimeout(() => {\n            if (value === false && this.ngKeyboardShortcuts) {\n                this.clearIds = this.keyboard.add(this.transformInput(this.ngKeyboardShortcuts));\n            }\n        })\n\n    }\n\n    /**\n     * @ignore\n     * @param {KeyboardShortcutsService} keyboard\n     * @param {ElementRef} el\n     */\n    constructor(private keyboard: KeyboardShortcutsService, private el: ElementRef) {}\n\n    /**\n     * @ignore\n     * @param {Shortcut[]} shortcuts\n     * @returns {any}\n     */\n    private transformInput(shortcuts: Shortcut[]) {\n        return shortcuts.map(shortcut => ({\n            ...shortcut,\n            target: this.el.nativeElement,\n            allowIn: [AllowIn.Select, AllowIn.Input, AllowIn.Textarea]\n        }));\n    }\n\n    /**\n     * @ignore\n     */\n    ngOnDestroy() {\n        if (!this.clearIds) {\n            return;\n        }\n        this.keyboard.remove(this.clearIds);\n    }\n\n    /**\n     * @ignore\n     * @param {SimpleChanges} changes\n     */\n    ngOnChanges(changes: SimpleChanges) {\n        const { ngKeyboardShortcuts } = changes;\n        if (this.clearIds) {\n            this.keyboard.remove(this.clearIds);\n        }\n        if (!ngKeyboardShortcuts || !ngKeyboardShortcuts.currentValue) {\n            return;\n        }\n        this.clearIds = this.keyboard.add(this.transformInput(ngKeyboardShortcuts.currentValue));\n    }\n}\n","import {\n    TemplateRef,\n    ViewContainerRef,\n    ElementRef,\n    ComponentRef,\n    EmbeddedViewRef,\n    Injector,\n    ComponentFactoryResolver,\n} from '@angular/core';\n\n/**\n * @ignore\n * Interface that can be used to generically type a class.\n */\nexport interface ComponentType<T> {\n    new (...args: any[]): T;\n}\n\n/**\n * @ignore\n * A `Portal` is something that you want to render somewhere else.\n * It can be attach to / detached from a `PortalOutlet`.\n */\nexport abstract class Portal<T> {\n    private _attachedHost: PortalOutlet | null;\n\n    /** Attach this portal to a host. */\n    attach(host: PortalOutlet): T {\n        if (host == null) {\n            // TODO: add error\n            console.error(\"null portal error\");\n        }\n\n        if (host.hasAttached()) {\n            console.error(\"portal already attached\");\n            // throwPortalAlreadyAttachedError();\n        }\n\n        this._attachedHost = host;\n        return <T> host.attach(this);\n    }\n\n    /** Detach this portal from its host */\n    detach(): void {\n        let host = this._attachedHost;\n\n        if (host == null) {\n            console.error(\"no portal attached!\");\n            // throwNoPortalAttachedError();\n        } else {\n            this._attachedHost = null;\n            host.detach();\n        }\n    }\n\n    /** Whether this portal is attached to a host. */\n    get isAttached(): boolean {\n        return this._attachedHost != null;\n    }\n\n    /**\n     * Sets the PortalOutlet reference without performing `attach()`. This is used directly by\n     * the PortalOutlet when it is performing an `attach()` or `detach()`.\n     */\n    setAttachedHost(host: PortalOutlet | null) {\n        this._attachedHost = host;\n    }\n}\n\n\n/**\n * @ignore\n * A `ComponentPortal` is a portal that instantiates some Component upon attachment.\n */\nexport class ComponentPortal<T> extends Portal<ComponentRef<T>> {\n    /** The type of the component that will be instantiated for attachment. */\n    component: ComponentType<T>;\n\n    /**\n     * [Optional] Where the attached component should live in Angular's *logical* component tree.\n     * This is different from where the component *renders*, which is determined by the PortalOutlet.\n     * The origin is necessary when the host is outside of the Angular application context.\n     */\n    viewContainerRef?: ViewContainerRef | null;\n\n    /** [Optional] Injector used for the instantiation of the component. */\n    injector?: Injector | null;\n\n    /**\n     * Alternate `ComponentFactoryResolver` to use when resolving the associated component.\n     * Defaults to using the resolver from the outlet that the portal is attached to.\n     */\n    componentFactoryResolver?: ComponentFactoryResolver | null;\n\n    constructor(\n        component: ComponentType<T>,\n        viewContainerRef?: ViewContainerRef | null,\n        injector?: Injector | null,\n        componentFactoryResolver?: ComponentFactoryResolver | null) {\n        super();\n        this.component = component;\n        this.viewContainerRef = viewContainerRef;\n        this.injector = injector;\n        this.componentFactoryResolver = componentFactoryResolver;\n    }\n}\n\n/**\n * @ignore\n * A `TemplatePortal` is a portal that represents some embedded template (TemplateRef).\n */\nexport class TemplatePortal<C = any> extends Portal<C> {\n    /** The embedded template that will be used to instantiate an embedded View in the host. */\n    templateRef: TemplateRef<C>;\n\n    /** Reference to the ViewContainer into which the template will be stamped out. */\n    viewContainerRef: ViewContainerRef;\n\n    /** Contextual data to be passed in to the embedded view. */\n    context: C | undefined;\n\n    constructor(template: TemplateRef<C>, viewContainerRef: ViewContainerRef, context?: C) {\n        super();\n        this.templateRef = template;\n        this.viewContainerRef = viewContainerRef;\n        this.context = context;\n    }\n\n    get origin(): ElementRef {\n        return this.templateRef.elementRef;\n    }\n\n    /**\n     * Attach the portal to the provided `PortalOutlet`.\n     * When a context is provided it will override the `context` property of the `TemplatePortal`\n     * instance.\n     */\n    attach(host: PortalOutlet, context: C | undefined = this.context): C {\n        this.context = context;\n        return super.attach(host);\n    }\n\n    detach(): void {\n        this.context = undefined;\n        return super.detach();\n    }\n}\n\n\n/**\n * @ignore\n * A `PortalOutlet` is an space that can contain a single `Portal`.\n */\nexport interface PortalOutlet {\n    /** Attaches a portal to this outlet. */\n    attach(portal: Portal<any>): any;\n\n    /** Detaches the currently attached portal from this outlet. */\n    detach(): any;\n\n    /** Performs cleanup before the outlet is destroyed. */\n    dispose(): void;\n\n    /** Whether there is currently a portal attached to this outlet. */\n    hasAttached(): boolean;\n}\n\n\n/**\n * @ignore\n * Partial implementation of PortalOutlet that handles attaching\n * ComponentPortal and TemplatePortal.\n */\nexport abstract class BasePortalOutlet implements PortalOutlet {\n    /** The portal currently attached to the host. */\n    protected _attachedPortal: Portal<any> | null;\n\n    /** A function that will permanently dispose this host. */\n    private _disposeFn: (() => void) | null;\n\n    /** Whether this host has already been permanently disposed. */\n    private _isDisposed: boolean = false;\n\n    /** Whether this host has an attached portal. */\n    hasAttached(): boolean {\n        return !!this._attachedPortal;\n    }\n\n    attach<T>(portal: ComponentPortal<T>): ComponentRef<T>;\n    attach<T>(portal: TemplatePortal<T>): EmbeddedViewRef<T>;\n    attach(portal: any): any;\n\n    /** Attaches a portal. */\n    attach(portal: Portal<any>): any {\n        if (!portal) {\n            console.error('null portal!');\n            // throwNullPortalError();\n        }\n\n        if (this.hasAttached()) {\n            console.error('portal already attached');\n            // throwPortalAlreadyAttachedError();\n        }\n\n        if (this._isDisposed) {\n            console.error('portal out already disposed');\n            // throwPortalOutletAlreadyDisposedError();\n        }\n\n        if (portal instanceof ComponentPortal) {\n            this._attachedPortal = portal;\n            return this.attachComponentPortal(portal);\n        } else if (portal instanceof TemplatePortal) {\n            this._attachedPortal = portal;\n            return this.attachTemplatePortal(portal);\n        }\n        console.error('unknown portal type');\n        // throwUnknownPortalTypeError();\n    }\n\n    abstract attachComponentPortal<T>(portal: ComponentPortal<T>): ComponentRef<T>;\n\n    abstract attachTemplatePortal<C>(portal: TemplatePortal<C>): EmbeddedViewRef<C>;\n\n    /** Detaches a previously attached portal. */\n    detach(): void {\n        if (this._attachedPortal) {\n            this._attachedPortal.setAttachedHost(null);\n            this._attachedPortal = null;\n        }\n\n        this._invokeDisposeFn();\n    }\n\n    /** Permanently dispose of this portal host. */\n    dispose(): void {\n        if (this.hasAttached()) {\n            this.detach();\n        }\n\n        this._invokeDisposeFn();\n        this._isDisposed = true;\n    }\n\n    /** @docs-private */\n    setDisposeFn(fn: () => void) {\n        this._disposeFn = fn;\n    }\n\n    private _invokeDisposeFn() {\n        if (this._disposeFn) {\n            this._disposeFn();\n            this._disposeFn = null;\n        }\n    }\n}\n","import {\n  ComponentFactoryResolver,\n  ComponentRef,\n  EmbeddedViewRef,\n  ApplicationRef,\n  Injector,\n} from '@angular/core';\nimport {BasePortalOutlet, ComponentPortal, TemplatePortal} from './portal';\n\n\n/**\n * @ignore\n * A PortalOutlet for attaching portals to an arbitrary DOM element outside of the Angular\n * application context.\n */\nexport class DomPortalOutlet extends BasePortalOutlet {\n  constructor(\n      /** Element into which the content is projected. */\n      public outletElement: Element,\n      private _componentFactoryResolver: ComponentFactoryResolver,\n      private _appRef: ApplicationRef,\n      private _defaultInjector: Injector) {\n    super();\n  }\n\n  /**\n   * Attach the given ComponentPortal to DOM element using the ComponentFactoryResolver.\n   * @param portal Portal to be attached\n   * @returns Reference to the created component.\n   */\n  attachComponentPortal<T>(portal: ComponentPortal<T>): ComponentRef<T> {\n    const resolver = portal.componentFactoryResolver || this._componentFactoryResolver;\n    const componentFactory = resolver.resolveComponentFactory(portal.component);\n    let componentRef: ComponentRef<T>;\n\n    // If the portal specifies a ViewContainerRef, we will use that as the attachment point\n    // for the component (in terms of Angular's component tree, not rendering).\n    // When the ViewContainerRef is missing, we use the factory to create the component directly\n    // and then manually attach the view to the application.\n    if (portal.viewContainerRef) {\n      componentRef = portal.viewContainerRef.createComponent(\n          componentFactory,\n          portal.viewContainerRef.length,\n          portal.injector || portal.viewContainerRef.injector);\n\n      this.setDisposeFn(() => componentRef.destroy());\n    } else {\n      componentRef = componentFactory.create(portal.injector || this._defaultInjector);\n      this._appRef.attachView(componentRef.hostView);\n      this.setDisposeFn(() => {\n        this._appRef.detachView(componentRef.hostView);\n        componentRef.destroy();\n      });\n    }\n    // At this point the component has been instantiated, so we move it to the location in the DOM\n    // where we want it to be rendered.\n    this.outletElement.appendChild(this._getComponentRootNode(componentRef));\n\n    return componentRef;\n  }\n\n  /**\n   * Attaches a template portal to the DOM as an embedded view.\n   * @param portal Portal to be attached.\n   * @returns Reference to the created embedded view.\n   */\n  attachTemplatePortal<C>(portal: TemplatePortal<C>): EmbeddedViewRef<C> {\n    let viewContainer = portal.viewContainerRef;\n    let viewRef = viewContainer.createEmbeddedView(portal.templateRef, portal.context);\n    viewRef.detectChanges();\n\n    // The method `createEmbeddedView` will add the view as a child of the viewContainer.\n    // But for the DomPortalOutlet the view can be added everywhere in the DOM\n    // (e.g Overlay Container) To move the view to the specified host element. We just\n    // re-append the existing root nodes.\n    viewRef.rootNodes.forEach(rootNode => this.outletElement.appendChild(rootNode));\n\n    this.setDisposeFn((() => {\n      let index = viewContainer.indexOf(viewRef);\n      if (index !== -1) {\n        viewContainer.remove(index);\n      }\n    }));\n\n    return viewRef;\n  }\n\n  /**\n   * Clears out a portal from the DOM.\n   */\n  dispose(): void {\n    super.dispose();\n    if (this.outletElement.parentNode != null) {\n      this.outletElement.parentNode.removeChild(this.outletElement);\n    }\n  }\n\n  /** Gets the root HTMLElement for an instantiated component. */\n  private _getComponentRootNode(componentRef: ComponentRef<any>): HTMLElement {\n    return (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n  }\n}\n","import {\n    ApplicationRef,\n    Component,\n    ComponentFactoryResolver, ElementRef, HostBinding,\n    Injector,\n    Input,\n    OnDestroy,\n    OnInit,\n    TemplateRef,\n    ViewChild,\n    ViewContainerRef\n} from \"@angular/core\";\nimport { DomPortalOutlet } from \"./dom-portal-outlet\";\nimport { TemplatePortal } from \"./portal\";\nimport { KeyboardShortcutsService } from \"./ng-keyboard-shortcuts.service\";\nimport { KeyboardShortcutsHelpService } from \"./ng-keyboard-shortcuts-help.service\";\nimport { animate, style, transition, trigger } from \"@angular/animations\";\nimport { distinctUntilChanged } from \"rxjs/operators\";\nimport { groupBy } from \"./utils\";\nimport { map } from \"rxjs/internal/operators\";\nimport { SubscriptionLike } from \"rxjs\";\n\n/**\n * @ignore\n */\nconst scrollAbleKeys = new Map([[31, 1], [38,1], [39, 1], [40, 1]]);\n/**\n * @ignore\n */\nconst preventDefault = (ignore: string) => e => {\n    const modal = e.target.closest(ignore);\n    if (modal) {\n        return;\n    }\n    e = e || window.event;\n    if (e.preventDefault) e.preventDefault();\n    e.returnValue = false;\n};\n/**\n * @ignore\n */\nconst preventDefaultForScrollKeys = e => {\n    if (!scrollAbleKeys.has(e.keyCode)) {\n        return;\n    }\n    preventDefault(e);\n    return false;\n};\n/**\n * @ignore\n */\nlet scrollEvents = [{name: 'wheel', callback: null}, {name: 'touchmove', callback: null}, {name: 'DOMMouseScroll', callback: null} ];\n\n\n/**\n * @ignore\n */\nconst disableScroll = (ignore: string) => {\n    scrollEvents = scrollEvents.map(event => {\n        const callback = preventDefault(ignore);\n        window.addEventListener(event.name, callback, {passive: false});\n        return {\n            ...event,\n            callback\n        }\n    });\n    window.addEventListener('keydown', preventDefaultForScrollKeys);\n};\n/**\n * @ignore\n */\nconst enableScroll = () => {\n    scrollEvents = scrollEvents.map(event => {\n        window.removeEventListener(event.name, event.callback);\n        return {\n            ...event,\n            callback: null\n        }\n    });\n    window.removeEventListener('keydown', preventDefaultForScrollKeys);\n};\n\n/**\n * A Component to show all registered shortcut in the app\n * it is shown as a modal\n */\n@Component({\n    selector: \"ng-keyboard-shortcuts-help\",\n    templateUrl: \"./ng-keyboard-shortcuts-help.component.html\",\n    styleUrls: [\"./ng-keyboard-shortcuts-help.component.css\"],\n    animations: [\n        trigger(\"enterAnimation\", [\n            transition(\":enter\", [\n                style({ transform: \"translateX(-100%)\", opacity: 0 }),\n                animate(\n                    \"0.33s cubic-bezier(0,0,0.3,1)\",\n                    style({ transform: \"translateX(0)\", opacity: 1 })\n                )\n            ]),\n            transition(\":leave\", [\n                style({ transform: \"translateX(0)\", opacity: 1 }),\n                animate(\n                    \"0.23s cubic-bezier(0,0,0.3,1)\",\n                    style({ transform: \"translateX(-100%)\", opacity: 0 })\n                )\n            ])\n        ]),\n        trigger(\"overlayAnimation\", [\n            transition(\":enter\", [\n                style({ opacity: 0 }),\n                animate(\"1s cubic-bezier(0,0,0.3,1)\", style({ opacity: 1 }))\n            ]),\n            transition(\":leave\", [\n                style({ opacity: 1 }),\n                animate(\"1s cubic-bezier(0,0,0.3,1)\", style({ opacity: 0 }))\n            ])\n        ])\n    ]\n})\nexport class KeyboardShortcutsHelpComponent implements OnInit, OnDestroy {\n    /**\n     * Disable scrolling while modal is open\n     */\n    @Input() disableScrolling = true;\n    /**\n     * @ignore\n     */\n    private _key: string;\n\n    public className = 'help-modal';\n\n    /**\n     * The shortcut to show/hide the help screen\n     */\n    @Input()\n    set key(value: string) {\n        this._key = value;\n        if (!value) {\n            return;\n        }\n        if(this.clearIds) {\n            this.keyboard.remove(this.clearIds);\n        }\n        this.clearIds = this.keyboard.add({\n            key: value,\n            preventDefault: true,\n            command: () => this.toggle()\n        });\n    }\n    private _closeKey;\n    @Input()\n    set closeKey(value: string) {\n        this._closeKey = value;\n        if (!value) {\n            return;\n        }\n        if (this.closeKeyIds) {\n            this.keyboard.remove(this.closeKeyIds);\n        }\n        this.closeKeyIds = this.keyboard.add({\n            key: value,\n            preventDefault: true,\n            command: () => this.hide()\n        });\n    }\n\n    /**\n     * The title of the help screen\n     * @default: \"Keyboard shortcuts\"\n     */\n    @Input() title = \"Keyboard shortcuts\";\n    /**\n     * What message to show when no shortcuts are available on the page.\n     * @default \"No shortcuts available\"\n     */\n    @Input() emptyMessage = \"No shortcuts available\";\n    /**\n     * @ignore\n     */\n    @ViewChild(TemplateRef, { static: false }) template: TemplateRef<any>;\n    /**\n     * @ignore\n     */\n    shortcuts: { label: string; key: string | string[]; description: string }[];\n    /**\n     * @ignore\n     */\n    showing = false;\n    /**\n     * @ignore\n     */\n    labels: string[];\n    /**\n     * @ignore\n     */\n    private bodyPortalHost: DomPortalOutlet;\n    /**\n     * @ignore\n     */\n    constructor(\n        private componentFactoryResolver: ComponentFactoryResolver,\n        private appRef: ApplicationRef,\n        private keyboard: KeyboardShortcutsService,\n        private element: ElementRef,\n        private keyboardHelp: KeyboardShortcutsHelpService,\n        private viewContainer: ViewContainerRef,\n        private injector: Injector\n    ) {\n        this.bodyPortalHost = new DomPortalOutlet(\n            document.body,\n            this.componentFactoryResolver,\n            this.appRef,\n            this.injector\n        );\n    }\n\n    /**\n     * Reveal the help screen manually.\n     */\n    reveal(): KeyboardShortcutsHelpComponent {\n        this.hide();\n        if (this.disableScrolling) {\n            disableScroll(`.${this.className}`);\n        }\n        const portal = new TemplatePortal(this.template, this.viewContainer);\n        this.bodyPortalHost.attach(portal);\n        this.showing = true;\n        return this;\n    }\n\n    /**\n     * Check if help screen is visible.\n     * @returns boolean\n     */\n    visible() : boolean {\n        return this.bodyPortalHost.hasAttached();\n    }\n\n    /**\n     * Hide the help screen manually.\n     */\n    hide() : KeyboardShortcutsHelpComponent {\n        if (this.disableScrolling) {\n            enableScroll();\n        }\n        if (!this.bodyPortalHost.hasAttached()) {\n            return this;\n        }\n        this.bodyPortalHost.detach();\n        this.showing = false;\n        return this;\n    }\n\n    /**\n     * @ignore\n     */\n    ngOnDestroy(): void {\n        this.hide();\n        if (this.clearIds) {\n            this.keyboard.remove(this.clearIds);\n        }\n        if (this.closeKeyIds) {\n            this.keyboard.remove(this.closeKeyIds);\n        }\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n        }\n    }\n\n    /**\n     * Show/Hide the help screen manually.\n     */\n    toggle() : KeyboardShortcutsHelpComponent {\n        this.visible() ? this.hide() : this.reveal();\n        return this;\n    }\n\n    /**\n     * @ignore\n     */\n    private subscription: SubscriptionLike;\n    /**\n     * @ignore\n     */\n    private clearIds;\n\n    /**\n     * @ignore\n     */\n    private closeKeyIds;\n    /**\n     * @ignore\n     */\n    private timeoutId;\n    /**\n     * @ignore\n     */\n    ngOnInit() {\n        this.subscription = this.keyboardHelp.shortcuts$\n            .pipe(distinctUntilChanged(), map(shortcuts => groupBy(shortcuts, \"label\")))\n            .subscribe(shortcuts => {\n                this.shortcuts = shortcuts;\n                this.labels = Object.keys(shortcuts);\n            });\n    }\n}\n","import { Component, Input, OnInit } from \"@angular/core\";\nimport { Shortcut } from \"./ng-keyboard-shortcuts.interfaces\";\nimport { symbols } from \"./keys\";\nimport { identity } from './utils';\n\n/**\n * @ignore\n */\n@Component({\n    selector: \"ng-keyboard-shortcuts-help-item\",\n    templateUrl: \"./ng-keyboard-shortcuts-help-item.component.html\",\n    styleUrls: [\"./ng-keyboard-shortcuts-help-item.component.css\"]\n})\nexport class KeyboardShortcutsHelpItemComponent implements OnInit {\n    public parsedKeys: string[][];\n\n    @Input() index: number;\n\n    @Input()\n    set shortcut(shortcut: Shortcut) {\n        const key = Array.isArray(shortcut.key) ? shortcut.key : [shortcut.key];\n        this.parsedKeys = key.map(key =>\n            key\n                .split(\" \")\n                .filter(identity)\n                .filter(key => key !== \"+\")\n                .map(key => {\n                    if (symbols[key]) {\n                        return symbols[key];\n                    }\n                    return key;\n                })\n        );\n        this._shortcut = shortcut;\n    }\n    get shortcut() {\n        return this._shortcut;\n    }\n\n    private _shortcut: Shortcut;\n\n    constructor() {}\n\n    ngOnInit() {}\n}\n","import { ModuleWithProviders, NgModule } from \"@angular/core\";\nimport { KeyboardShortcutsComponent } from \"./ng-keyboard-shortcuts.component\";\nimport { KeyboardShortcutsService } from \"./ng-keyboard-shortcuts.service\";\nimport { KeyboardShortcutsHelpService } from './ng-keyboard-shortcuts-help.service';\nimport { KeyboardShortcutsDirective } from './ng-keyboard-shortcuts.directive';\nimport { KeyboardShortcutsHelpComponent } from './ng-keyboard-shortcuts-help.component';\nimport { KeyboardShortcutsHelpItemComponent } from './ng-keyboard-shortcuts-help-item.component';\nimport { CommonModule } from \"@angular/common\";\n\n\n\n@NgModule({\n    imports: [CommonModule],\n    entryComponents: [KeyboardShortcutsHelpComponent],\n    declarations: [KeyboardShortcutsComponent, KeyboardShortcutsDirective, KeyboardShortcutsHelpComponent, KeyboardShortcutsHelpItemComponent],\n    exports: [KeyboardShortcutsComponent, KeyboardShortcutsDirective, KeyboardShortcutsHelpComponent]\n})\nexport class KeyboardShortcutsModule {\n    public static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: KeyboardShortcutsModule,\n            providers: [\n                KeyboardShortcutsService,\n                KeyboardShortcutsHelpService\n            ]\n        };\n    }\n}\n","if (!Element.prototype.matches) {\n    Element.prototype.matches = (Element.prototype as any).msMatchesSelector ||\n        Element.prototype.webkitMatchesSelector;\n}\n\nif (!Element.prototype.closest) {\n    Element.prototype.closest = function(s) {\n        let el = this;\n\n        do {\n            if (el.matches(s)) return el;\n            el = el.parentElement || el.parentNode;\n        } while (el !== null && el.nodeType === 1);\n        return null;\n    };\n}\n\nif (!(Array.prototype as any).flat) {\n    (Array.prototype as any).flat = function(depth) {\n        var flattend = [];\n        (function flat(array, depth) {\n            for (let el of array) {\n                if (Array.isArray(el) && depth > 0) {\n                    flat(el, depth - 1);\n                } else {\n                    flattend.push(el);\n                }\n            }\n        })(this, Math.floor(depth) || 1);\n        return flattend;\n    };\n}\n\nif (!(Array.prototype as any).flatMap) {\n    (Array.prototype as any).flatMap = function() {\n        return Array.prototype.map.apply(this, arguments).flat(1);\n    };\n}"],"names":["Subject","BehaviorSubject","filter","fromEvent","map","tap","throttle","timer","catchError","throwError","switchMap","scan","of","takeUntil","repeat","tslib_1.__assign","Injectable","tslib_1.__decorate","Input","Component","AllowIn","Directive","ElementRef","tslib_1.__extends","distinctUntilChanged","ViewChild","TemplateRef","trigger","transition","style","animate","ComponentFactoryResolver","ApplicationRef","ViewContainerRef","Injector","NgModule","CommonModule"],"mappings":"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"}